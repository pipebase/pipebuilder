syntax = "proto3";
package build;

message BuildRequest {
    // manifest namespace
    string namespace = 1;
    // manifest id
    string manifest_id = 2;
    // manifest version
    uint64 manifest_version = 3;
    // target platform
    string target_platform = 4;
}

message BuildResponse {
    // version: build version
    uint64 version = 1;
}

message CancelRequest {
    // manifest namespace
    string namespace = 1;
    // manifest id
    string id = 2;
    // version: build version
    uint64 build_version = 3;
}

message CancelResponse {}

message ListRequest {}

message VersionBuildKey {
    // manifest namespace
    string namespace = 1;
    // manifest id
    string id = 2;
    // version: build version
    uint64 version = 3;
}

message ListResponse {
    repeated VersionBuildKey keys = 1;
}

service Builder {
    rpc Build(BuildRequest) returns (BuildResponse) {}
    rpc Cancel(CancelRequest) returns (CancelResponse) {}
    rpc List(ListRequest) returns (ListResponse) {}
}
