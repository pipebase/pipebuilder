syntax = "proto3";
package repository;

message GetManifestRequest {
    // app namespace
    string namespace = 1;
    // app id
    string id = 2;
    // app manifest version
    uint64 version = 3;
}

message GetManifestResponse {
    // manifest binaries
    bytes buffer = 1;
}

message PutManifestRequest {
    // app namespace
    string namespace = 1;
    // app id
    string id = 2;
    // manifest binaries
    bytes buffer = 3;
}

message PutManifestResponse {
    // manifest id
    string id = 1;
    // app manifest version
    uint64 version = 2;
}

message GetAppRequest {
    // app namespace
    string namespace = 1;
    // app id
    string id = 2;
    // app build version
    uint64 version = 3;
}

message GetAppResponse {
    // app binaries
    bytes buffer = 1;
}

message PostAppRequest {
    // app namespace
    string namespace = 1;
    // app id
    string id = 2;
    // app build version
    uint64 version = 3;
    // app binaries
    bytes buffer = 4;
}

message PostAppResponse {}

service Repository {
    rpc GetManifest(GetManifestRequest) returns (GetManifestResponse) {}
    rpc PutManifest(PutManifestRequest) returns (PutManifestResponse) {}
    rpc GetApp(GetAppRequest) returns (GetAppResponse) {}
    rpc PostApp(PostAppRequest) returns (PostAppResponse) {}
}
